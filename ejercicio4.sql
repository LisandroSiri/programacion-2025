CREATE TABLE "cliente" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(255) NOT NULL,
	"telefono" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "items" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(255) NOT NULL,
	"descripcion" VARCHAR(255) NOT NULL,
	"precio" DOUBLE PRECISION NOT NULL,
	"id_categoria" INTEGER NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "categorias" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "detalle_pedido" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_pedido" INTEGER NOT NULL,
	"cantidad" INTEGER NOT NULL,
	"id_item" INTEGER NOT NULL,
	"precio_unitario" DOUBLE PRECISION NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "pedido" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"fecha" DATE NOT NULL,
	"id_cliente" INTEGER NOT NULL,
	"monto" DOUBLE PRECISION NOT NULL,
	"estado" INTEGER NOT NULL,
	PRIMARY KEY("id")
);



ALTER TABLE "detalle_pedido"
ADD FOREIGN KEY("id_pedido") REFERENCES "pedido"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "detalle_pedido"
ADD FOREIGN KEY("id_item") REFERENCES "items"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "pedido"
ADD FOREIGN KEY("id_cliente") REFERENCES "cliente"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "items"
ADD FOREIGN KEY("id_categoria") REFERENCES "categorias"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE "detalle_pedido"
ADD FOREIGN KEY("precio_unitario") REFERENCES "items"("precio")
ON UPDATE NO ACTION ON DELETE NO ACTION;