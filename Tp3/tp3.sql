CREATE TABLE "automovil" (
	"nro_chasis" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_modelo" INTEGER NOT NULL,
	"precio" DOUBLE PRECISION NOT NULL,
	"descuento" DOUBLE PRECISION NOT NULL,
	PRIMARY KEY("nro_chasis")
);




CREATE TABLE "modelo" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_version" INTEGER NOT NULL,
	"id_marca" INTEGER NOT NULL,
	"nombre" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "marca" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "version" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(255) NOT NULL,
	"descripcion" VARCHAR(255) NOT NULL,
	"cilindraje" INTEGER NOT NULL,
	"potencia" INTEGER NOT NULL,
	"color" VARCHAR(255) NOT NULL,
	"id_modelo" INTEGER NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "equipamiento" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(255) NOT NULL,
	"descripcion" VARCHAR(255) NOT NULL,
	"id_extra" INTEGER NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "extras" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"tipo" VARCHAR(255) NOT NULL,
	"precio" DOUBLE PRECISION NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "version/equipamiento" (
	"id_version" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_equipamiento" INTEGER NOT NULL,
	"precio" DOUBLE PRECISION NOT NULL
);




CREATE TABLE "stock" (
	"nro_chasis" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_domicilio" INTEGER NOT NULL
);




CREATE TABLE "servicio_oficial" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(255) NOT NULL,
	"id_domicilio" INTEGER NOT NULL,
	"CUIT" INTEGER NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "venta" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"modo_de_pago" VARCHAR(255) NOT NULL,
	"fecha_entrega" DATE NOT NULL,
	"matricula" VARCHAR(255) NOT NULL,
	"nro_chasis" INTEGER NOT NULL,
	"id_vendedor" INTEGER NOT NULL,
	"encargo" INTEGER NOT NULL,
	"id_extras" INTEGER NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE "vendedor" (
	"dni" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(255) NOT NULL,
	"domicilio_venta" INTEGER NOT NULL,
	PRIMARY KEY("dni")
);



ALTER TABLE "marca"
ADD FOREIGN KEY("id") REFERENCES "modelo"("id_marca")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "modelo"
ADD FOREIGN KEY("id") REFERENCES "version"("id_modelo")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "version"
ADD FOREIGN KEY("id") REFERENCES "version/equipamiento"("id_version")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "equipamiento"
ADD FOREIGN KEY("id") REFERENCES "version/equipamiento"("id_equipamiento")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "extras"
ADD FOREIGN KEY("id") REFERENCES "equipamiento"("id_extra")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "modelo"
ADD FOREIGN KEY("id") REFERENCES "automovil"("id_modelo")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "automovil"
ADD FOREIGN KEY("nro_chasis") REFERENCES "venta"("nro_chasis")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "automovil"
ADD FOREIGN KEY("nro_chasis") REFERENCES "stock"("nro_chasis")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "servicio_oficial"
ADD FOREIGN KEY("id_domicilio") REFERENCES "vendedor"("domicilio_venta")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "servicio_oficial"
ADD FOREIGN KEY("id_domicilio") REFERENCES "stock"("id_domicilio")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "vendedor"
ADD FOREIGN KEY("dni") REFERENCES "venta"("id_vendedor")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "venta"
ADD FOREIGN KEY("id_extras") REFERENCES "extras"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;